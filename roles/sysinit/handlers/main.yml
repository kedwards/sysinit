---
- name: reload systemd daemon
  ansible.builtin.systemd:
    daemon_reload: true
  become: true
  listen: "reload systemd"

- name: restart ssh service
  ansible.builtin.service:
    name: "{{ ssh_service_name | default('sshd') }}"
    state: restarted
  become: true
  listen: "restart ssh"

- name: reload ssh config
  ansible.builtin.meta: noop
  listen: "reload ssh config"

# General headers
- name: restart docker
  ansible.builtin.service:
    name: docker
    state: restarted
  become: true
  listen: "restart docker"

- name: reload profile
  ansible.builtin.shell:
    cmd: "source {{ lookup('env', 'HOME') }}/.bashrc"
  become: false
  listen: "reload profile"
